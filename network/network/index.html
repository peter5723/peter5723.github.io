
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../../ai/infra/">
      
      
        <link rel="next" href="../../wen/poem/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.15">
    
    
      
        <title>网络 - Peter's home</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto+Serif+SC:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Noto Serif SC";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/riscv.css">
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="custom">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#_1" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Peter&#39;s home" class="md-header__button md-logo" aria-label="Peter's home" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Peter's home
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              网络
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Peter&#39;s home" class="md-nav__button md-logo" aria-label="Peter's home" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Peter's home
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../about/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    About
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    build a website
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            build a website
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../website/mkdocs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    mkdocs
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../website/github-pages/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    jekyll
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../website/pic-bed/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    图床
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    工具
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            工具
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/vscode/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    vscode
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/shell/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    shell
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/vim/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    vim
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/git/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    git
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/make/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    GNU Make
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/cmake/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    cmake
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/ssh/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    网络
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    化学
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            化学
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chem/thermo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    化学热力学中的一些问题
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chem/balance/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    配平化学方程式
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    信号
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            信号
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../signal/onesidez/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    z变换
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../signal/DFT/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DFT
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../signal/stft/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    短时傅里叶变换
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../signal/ch6_ss/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    LTI系统频域特性（ss第6章）
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../signal/pca/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PCA 法滤波
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    计算机系统
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            计算机系统
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ICS/2023-11-02-PAnote/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PA 实验记录
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ICS/riscv/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    RISC-V
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ICS/number/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    数字与算术
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ICS/links/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    链接和程序结构
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ICS/stack/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    栈和函数调用
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ICS/memory/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    基本存储
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ICS/vm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    虚拟内存
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ICS/io/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    IO 和文件系统
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ICS/callback/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    回调函数
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    操作系统
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            操作系统
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../os/osnote/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    os 实验记录
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../os/thread/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    线程
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../os/src/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    xv6 源代码
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    算法
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            算法
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../algorithm/intro/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    介绍
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_2" >
        
          
          <label class="md-nav__link" for="__nav_9_2" id="__nav_9_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    搜索
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_2">
            <span class="md-nav__icon md-icon"></span>
            搜索
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../algorithm/search/DFS/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DFS
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../algorithm/dp/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    动态规划
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../algorithm/np/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    np 完全性问题
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../algorithm/greedy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    贪心算法
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10" >
        
          
          <label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    优化理论
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10">
            <span class="md-nav__icon md-icon"></span>
            优化理论
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../opt/intro/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    介绍
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../opt/la/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    线性代数复习
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../opt/convex/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    凸优化问题
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_11" >
        
          
          <label class="md-nav__link" for="__nav_11" id="__nav_11_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    C++
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_11">
            <span class="md-nav__icon md-icon"></span>
            C++
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Cpp/intro/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CS106L 笔记
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_12" >
        
          
          <label class="md-nav__link" for="__nav_12" id="__nav_12_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    ai infra
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_12">
            <span class="md-nav__icon md-icon"></span>
            ai infra
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ai/infra/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    介绍
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_13" checked>
        
          
          <label class="md-nav__link" for="__nav_13" id="__nav_13_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    计算机网络
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_13_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_13">
            <span class="md-nav__icon md-icon"></span>
            计算机网络
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    网络
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    网络
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      第一章 总览
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      第二章 应用层
    </span>
  </a>
  
    <nav class="md-nav" aria-label="第二章 应用层">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21" class="md-nav__link">
    <span class="md-ellipsis">
      2.1 例子
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-http" class="md-nav__link">
    <span class="md-ellipsis">
      2.2 HTTP 协议
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23-dns" class="md-nav__link">
    <span class="md-ellipsis">
      2.3 DNS 协议
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#transport-layer" class="md-nav__link">
    <span class="md-ellipsis">
      第三章 运输层 transport-layer
    </span>
  </a>
  
    <nav class="md-nav" aria-label="第三章 运输层 transport-layer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31" class="md-nav__link">
    <span class="md-ellipsis">
      3.1 概述
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32" class="md-nav__link">
    <span class="md-ellipsis">
      3.2 多路复用和多路分解
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33-udp" class="md-nav__link">
    <span class="md-ellipsis">
      3.3 UDP 协议
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#34" class="md-nav__link">
    <span class="md-ellipsis">
      3.4 可靠数据传输
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#35-tcp" class="md-nav__link">
    <span class="md-ellipsis">
      3.5 TCP
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      第四章 网络层
    </span>
  </a>
  
    <nav class="md-nav" aria-label="第四章 网络层">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41" class="md-nav__link">
    <span class="md-ellipsis">
      4.1 概述
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42" class="md-nav__link">
    <span class="md-ellipsis">
      4.2 路由器
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#43-the-internet-protocolip" class="md-nav__link">
    <span class="md-ellipsis">
      4.3 网际协议（The Internet Protocol，IP）
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4.3 网际协议（The Internet Protocol，IP）">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ipv4" class="md-nav__link">
    <span class="md-ellipsis">
      IPv4 数据报格式
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ipv4_1" class="md-nav__link">
    <span class="md-ellipsis">
      IPv4 编址
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ip-dhcp" class="md-nav__link">
    <span class="md-ellipsis">
      获取 IP 地址，DHCP 协议
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nat" class="md-nav__link">
    <span class="md-ellipsis">
      NAT
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ipv6" class="md-nav__link">
    <span class="md-ellipsis">
      IPv6
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      子网和网关
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#44" class="md-nav__link">
    <span class="md-ellipsis">
      4.4 选路
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#45-proxyvpn" class="md-nav__link">
    <span class="md-ellipsis">
      4.5 proxy，vpn
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      第五章 链路层
    </span>
  </a>
  
    <nav class="md-nav" aria-label="第五章 链路层">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#51" class="md-nav__link">
    <span class="md-ellipsis">
      5.1 概述
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#52" class="md-nav__link">
    <span class="md-ellipsis">
      5.2 差错检测与纠错
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#53" class="md-nav__link">
    <span class="md-ellipsis">
      5.3 多路访问协议
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#54" class="md-nav__link">
    <span class="md-ellipsis">
      5.4 链路层编址
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5.4 链路层编址">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mac" class="md-nav__link">
    <span class="md-ellipsis">
      MAC 地址
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#arp" class="md-nav__link">
    <span class="md-ellipsis">
      ARP 协议
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#55" class="md-nav__link">
    <span class="md-ellipsis">
      5.5 以太网与局域网
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#56" class="md-nav__link">
    <span class="md-ellipsis">
      5.6 网线
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_14" >
        
          
          <label class="md-nav__link" for="__nav_14" id="__nav_14_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    书
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_14_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_14">
            <span class="md-nav__icon md-icon"></span>
            书
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../wen/poem/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    诗词格律
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../wen/LaPeste/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    鼠疫
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../wen/sisyphe/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    西西弗神话
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../wen/outsider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    局外人
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../wen/kab/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    卡拉马佐夫兄弟
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../wen/beggar/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    赌徒
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../wen/Dubliners/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Dubliners
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../wen/euro/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    欧洲卡车模拟
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_15" >
        
          
          <label class="md-nav__link" for="__nav_15" id="__nav_15_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    diary
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_15_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_15">
            <span class="md-nav__icon md-icon"></span>
            diary
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_15_1" >
        
          
          <label class="md-nav__link" for="__nav_15_1" id="__nav_15_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    one diary
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_15_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_15_1">
            <span class="md-nav__icon md-icon"></span>
            one diary
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../diary/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    one one diary
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      第一章 总览
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      第二章 应用层
    </span>
  </a>
  
    <nav class="md-nav" aria-label="第二章 应用层">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21" class="md-nav__link">
    <span class="md-ellipsis">
      2.1 例子
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-http" class="md-nav__link">
    <span class="md-ellipsis">
      2.2 HTTP 协议
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23-dns" class="md-nav__link">
    <span class="md-ellipsis">
      2.3 DNS 协议
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#transport-layer" class="md-nav__link">
    <span class="md-ellipsis">
      第三章 运输层 transport-layer
    </span>
  </a>
  
    <nav class="md-nav" aria-label="第三章 运输层 transport-layer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31" class="md-nav__link">
    <span class="md-ellipsis">
      3.1 概述
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32" class="md-nav__link">
    <span class="md-ellipsis">
      3.2 多路复用和多路分解
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33-udp" class="md-nav__link">
    <span class="md-ellipsis">
      3.3 UDP 协议
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#34" class="md-nav__link">
    <span class="md-ellipsis">
      3.4 可靠数据传输
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#35-tcp" class="md-nav__link">
    <span class="md-ellipsis">
      3.5 TCP
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      第四章 网络层
    </span>
  </a>
  
    <nav class="md-nav" aria-label="第四章 网络层">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41" class="md-nav__link">
    <span class="md-ellipsis">
      4.1 概述
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42" class="md-nav__link">
    <span class="md-ellipsis">
      4.2 路由器
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#43-the-internet-protocolip" class="md-nav__link">
    <span class="md-ellipsis">
      4.3 网际协议（The Internet Protocol，IP）
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4.3 网际协议（The Internet Protocol，IP）">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ipv4" class="md-nav__link">
    <span class="md-ellipsis">
      IPv4 数据报格式
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ipv4_1" class="md-nav__link">
    <span class="md-ellipsis">
      IPv4 编址
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ip-dhcp" class="md-nav__link">
    <span class="md-ellipsis">
      获取 IP 地址，DHCP 协议
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nat" class="md-nav__link">
    <span class="md-ellipsis">
      NAT
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ipv6" class="md-nav__link">
    <span class="md-ellipsis">
      IPv6
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      子网和网关
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#44" class="md-nav__link">
    <span class="md-ellipsis">
      4.4 选路
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#45-proxyvpn" class="md-nav__link">
    <span class="md-ellipsis">
      4.5 proxy，vpn
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      第五章 链路层
    </span>
  </a>
  
    <nav class="md-nav" aria-label="第五章 链路层">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#51" class="md-nav__link">
    <span class="md-ellipsis">
      5.1 概述
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#52" class="md-nav__link">
    <span class="md-ellipsis">
      5.2 差错检测与纠错
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#53" class="md-nav__link">
    <span class="md-ellipsis">
      5.3 多路访问协议
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#54" class="md-nav__link">
    <span class="md-ellipsis">
      5.4 链路层编址
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5.4 链路层编址">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mac" class="md-nav__link">
    <span class="md-ellipsis">
      MAC 地址
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#arp" class="md-nav__link">
    <span class="md-ellipsis">
      ARP 协议
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#55" class="md-nav__link">
    <span class="md-ellipsis">
      5.5 以太网与局域网
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#56" class="md-nav__link">
    <span class="md-ellipsis">
      5.6 网线
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="_1">计算机网络介绍<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h1>
<h2 id="_2">第一章 总览<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h2>
<p>传输的信息包基本单元：packet（分组，包）</p>
<p>端
接入网
网络核心——ISP（因特网服务提供商）</p>
<p>最大的网：因特网/互联网（internet）</p>
<p>分布式</p>
<p>网络编程接口 API</p>
<p>协议</p>
<p>客户机-服务器</p>
<p>P2P</p>
<p>局域网——以太网</p>
<p>无线局域网 802.11</p>
<p>分组（packet）交换</p>
<p>网络协议自顶向下分层：</p>
<ul>
<li>应用层：网络应用程序和应用层协议：HTTP、SMTP、FTP、DNS。应用层的信息分组（packet）称为报文（message）</li>
<li>运输层：应用程序端点之间传输应用层报文。协议：TCP、UDP。运输层的分组称为报文段（segment）</li>
<li>网络层：将称为数据报（datagram）的网络层分组从一台主机移动到另一台主机。运输层协议向网络层递交运输层报文段和目的地址。网络层协议包含 IP 协议与路由的选路协议。</li>
<li>链路层：网络层将数据下发给链路层，链路层沿着路径将数据报传递给下一个节点。链路层协议包括以太网、wifi。链路层分组称为帧（frame）。</li>
<li>物理层：将帧中的比特一个一个实际地传输到下一个节点。</li>
</ul>
<p>发送时：应用层报文传给运输层。运输层收取报文附上首部信息，构成运输层报文段。（首部信息包括差错检测比特等等）。运输层向网络层传递报文段，网络层增加目的系统地址等信息，形成网络层数据报。数据报传给链路层，链路层也依据协议封装成链路帧。最后，通过物理层执行实际的传输。</p>
<p>每一层的分组（packet）包含两种字段：首部字段和有效载荷。</p>
<p>在接收端，数据报重新还原成报文段。</p>
<p>上面的描述见下图，就非常直白了：</p>
<p><img alt="" src="https://cdn.jsdelivr.net/gh/peter5723/imagehost/img/net1.png" /></p>
<p>网络每一层都对上一层封装（Encapsulation）好。只要按照协议将数据交给下一层即可，这层无需担心下一层怎么传输。</p>
<h2 id="_3">第二章 应用层<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h2>
<h3 id="21">2.1 例子<a class="headerlink" href="#21" title="Permanent link">&para;</a></h3>
<p>我们用 Python 可以简单地写一个服务器客户端应用程序。可以在两台连接的计算机上跑，看会发生什么。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="c1"># serve.py</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="c1"># TCP服务器端</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="kn">import</span><span class="w"> </span><span class="nn">socket</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="c1"># 创建TCP套接字</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="n">server_socket</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">AF_INET</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">SOCK_STREAM</span><span class="p">)</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="c1"># 绑定本地地址和端口</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="n">server_socket</span><span class="o">.</span><span class="n">bind</span><span class="p">((</span><span class="s1">&#39;192.168.223.1&#39;</span><span class="p">,</span> <span class="mi">8888</span><span class="p">))</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="c1"># 监听连接（最大连接数5）</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="n">server_socket</span><span class="o">.</span><span class="n">listen</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;服务器已启动，等待客户端连接...&quot;</span><span class="p">)</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a>    <span class="c1"># 接受客户端连接</span>
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a>    <span class="n">client_socket</span><span class="p">,</span> <span class="n">addr</span> <span class="o">=</span> <span class="n">server_socket</span><span class="o">.</span><span class="n">accept</span><span class="p">()</span>
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;客户端 </span><span class="si">{</span><span class="n">addr</span><span class="si">}</span><span class="s2"> 已连接&quot;</span><span class="p">)</span>
<a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a>
<a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a>    <span class="c1"># 接收客户端数据（最大1024字节）</span>
<a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a>    <span class="n">data</span> <span class="o">=</span> <span class="n">client_socket</span><span class="o">.</span><span class="n">recv</span><span class="p">(</span><span class="mi">1024</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
<a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;收到消息: </span><span class="si">{</span><span class="n">data</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-21" name="__codelineno-0-21" href="#__codelineno-0-21"></a>
<a id="__codelineno-0-22" name="__codelineno-0-22" href="#__codelineno-0-22"></a>    <span class="c1"># 发送响应</span>
<a id="__codelineno-0-23" name="__codelineno-0-23" href="#__codelineno-0-23"></a>    <span class="n">response</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;已收到你的消息: </span><span class="si">{</span><span class="n">data</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-24" name="__codelineno-0-24" href="#__codelineno-0-24"></a>    <span class="n">client_socket</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">))</span>
<a id="__codelineno-0-25" name="__codelineno-0-25" href="#__codelineno-0-25"></a>
<a id="__codelineno-0-26" name="__codelineno-0-26" href="#__codelineno-0-26"></a>    <span class="c1"># 关闭连接</span>
<a id="__codelineno-0-27" name="__codelineno-0-27" href="#__codelineno-0-27"></a>    <span class="n">client_socket</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="c1"># client.py</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="c1"># TCP客户端</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="kn">import</span><span class="w"> </span><span class="nn">socket</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="c1"># 创建TCP套接字</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="n">client_socket</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">AF_INET</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">SOCK_STREAM</span><span class="p">)</span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="c1"># 连接服务器</span>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="n">client_socket</span><span class="o">.</span><span class="n">connect</span><span class="p">((</span><span class="s1">&#39;192.168.223.1&#39;</span><span class="p">,</span> <span class="mi">8888</span><span class="p">))</span>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a><span class="c1"># 发送消息</span>
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a><span class="n">message</span> <span class="o">=</span> <span class="s2">&quot;Hello, Server!&quot;</span>
<a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a><span class="n">client_socket</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">))</span>
<a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a>
<a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a><span class="c1"># 接收响应</span>
<a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a><span class="n">response</span> <span class="o">=</span> <span class="n">client_socket</span><span class="o">.</span><span class="n">recv</span><span class="p">(</span><span class="mi">1024</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
<a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;服务器响应: </span><span class="si">{</span><span class="n">response</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a>
<a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a><span class="c1"># 关闭连接</span>
<a id="__codelineno-1-19" name="__codelineno-1-19" href="#__codelineno-1-19"></a><span class="n">client_socket</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre></div>
<h3 id="22-http">2.2 HTTP 协议<a class="headerlink" href="#22-http" title="Permanent link">&para;</a></h3>
<p>客户机-服务器</p>
<p>进程通信：交换报文</p>
<p>进程通过一个称为套接字（socket）的软件接口来交换报文。socket 在英文中是插口的意思。我们可以将之理解为一个“门”。报文从这个门出来，走到另一个门。套接字就是应用程序和网络之间的应用程序编程接口（API），应用程序通过套接字来使用网络。通过套接字可以控制应用层端的所有东西，但是运输层则很少，仅限于选择运输层协议（如 TCP），设置一些运输层参数。</p>
<p>可供应用程序运输的服务协议主要有 TCP 和 UDP。TCP 连接全双工，传输可靠。目前大多数应用程序如电子邮件、web、文件传输都使用 TCP 作为运输层协议。</p>
<p>通信寻址：IP 地址标识唯一主机，端口号标识主机进程。</p>
<p>Web 应用：用户打开 Web 浏览器（比如 Firefox），打开一个站点，发送请求。请求按照 HTTP 协议构造的报文发送。Web 服务器接受请求，按 HTTP 协议返回文件（HTML 格式），用户就可以浏览网页。</p>
<p>HTTP：超文本传输协议。HTTP 协议由两部分组成：客户机和服务器程序，交换 HTTP 报文进行会话。</p>
<p>Web 术语：</p>
<ul>
<li>Web 页面：由 HTML 文件、JPEG 图片、程序、视频等对象（object）一起构成。通过对象的 URL 地址对对象进行引用。URL（Uniform Resource Locator，统一资源定位符）是用于完整地描述互联网上网页或其他资源位置的一组字符。一个 URL 地址包括协议、域名或IP地址、端口号、路径等组成部分。例如 "http://192.168.1.1/index.html"。</li>
<li>Web 浏览器：实现了客户机部分，发送请求，接收数据，展示给用户。</li>
<li>Web 服务器：实现了服务器部分，存储 Web 对象，每个对象由 URL 寻址，发送给请求的用户。</li>
</ul>
<p>HTTP 协议用 TCP 作为其运输层协议。客户机发起与服务器的 TCP 连接，从套接字接口发送 HTTP 请求报文，接收 HTTP 响应报文。服务器从套接字接口接收 HTTP 请求报文，发送 HTTP 响应报文。</p>
<p>报文被发送后，就由 TCP 控制。TCP 对 HTTP 封装好，提供可靠传输服务。HTTP 无需担心任何事情，都是 TCP 和更下层的工作。HTTP 只需到 TCP 发送和接收数据即可。</p>
<p>HTTP 服务器不保存关于客户机的任何信息，是“无状态协议”。</p>
<p>我们看下面这张图，展示了传输的过程：</p>
<p><img alt="" src="https://cdn.jsdelivr.net/gh/peter5723/imagehost/img/net2.png" /></p>
<p>就是一个所谓的<strong>三次握手</strong>过程：</p>
<ol>
<li>客户机向服务器发送一个小 TCP 报文段</li>
<li>服务器返回一个小 TCP 报文段进行确认和响应</li>
<li>客户机向服务器返回确认，且发送一个 HTTP 请求报文</li>
</ol>
<p>这样完成握手以后，服务器才向客户机发送文件。</p>
<p>HTTP 报文格式：</p>
<p>请求报文：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>&lt;请求行&gt;：方法、路径、协议版本
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>&lt;请求头部字段&gt;：包含多个键值对，如 Host、connection 等等。
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>空行（CRLF） ：表示头部结束。
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>&lt;请求正文（可选）&gt;
</code></pre></div>
<p>例如：
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>GET /somedir/page.html HTTP/1.1
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>Host: www.someschool.edu
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>Connection: close
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>User-agent: Mozilla/5.0
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>Accept-language: fr
</code></pre></div></p>
<p>响应报文：
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>&lt;状态行&gt;：协议版本、状态码、状态短语
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>&lt;响应头部字段&gt;：服务器信息等内容
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>空行（CRLF） ：表示头部结束。
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>&lt;响应正文（可选）&gt;：返回客户端的实际内容，如 HTML 页面。
</code></pre></div></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>HTTP/1.1 200 OK
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>Connection: close
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>Date: Tue, 18 Aug 2015 15:44:04 GMT
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>Server: Apache/2.2.3 (CentOS)
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a>Last-Modified: Tue, 18 Aug 2015 15:11:03 GMT
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a>Content-Length: 6821
<a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a>Content-Type: text/html
<a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a>
<a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a>(data data data data data ...)
</code></pre></div>
<p>浏览器按 F12 打开开发者页面就可以轻松地看到 http 报文。</p>
<p>http 是无状态协议。但是 http 可以使用 cookie 技术来让服务器跟踪用户状态。简单说：第一次到达一个使用 cookie 的站点，站点会产生一个唯一识别码，添加到后端数据库中。接着站点返回一个响应报文，包含 Set-cookie: 这个首部表项和识别码。用户端浏览器接收到这个报文，就往其管理的 cookie 文件中添加一行，包含站点服务器的主机名和识别码。之后用户再访问站点时，浏览器发送的请求报文都会包含这个识别码。服务器就可以根据这个识别码，检索数据库，来跟踪用户的状态，如访问活动。</p>
<p>Web 缓存器</p>
<p>电子邮件协议：SMTP 发送，POP3/IMAP 接收</p>
<h3 id="23-dns">2.3 DNS 协议<a class="headerlink" href="#23-dns" title="Permanent link">&para;</a></h3>
<p>互联网主机识别：主机名（hostname）或者 IP 地址。进行转换的目录服务：域名系统（Domain Name System，DNS）。DNS 协议正常由其他应用层协议使用，用于将主机名转化成 IP 地址。举例，用户输入 <code>www.baidu.com</code> 时，发生的事情：</p>
<ul>
<li>用户主机运行 DNS 应用的客户机端</li>
<li>浏览器将主机名 <code>www.baidu.com</code> 传给 DNS 应用的客户机端</li>
<li>DNS 客户机向 DNS 服务器发送一个包含主机名的请求</li>
<li>DNS 客户机收到 DNS 服务器的回答报文</li>
<li>浏览器接收到来自 DNS 的 IP 地址，向该 IP 地址定位的 HTTP 服务器发送一个 TCP 连接</li>
</ul>
<p>用 wireshark 抓包，过滤 DNS 协议，即可查看 DNS 服务器地址以及 DNS 报文。</p>
<p>实验室的电脑不知道怎么回事，抽风了抓不出来，回寝室用自己的笔记本电脑就可以成功抓包 DNS 服务了。首先用 <code>nslookup &lt;hostname&gt;</code> 就可以找到域名对应的 IP 地址。<code>nslookup</code> 指令是走 DNS 服务查询的。我们开启 wireshark 抓包，过滤 DNS 协议，打开一个命令行输入 <code>nslookup bing.com</code>，就可以看到如下图的结果。</p>
<p><img alt="" src="https://cdn.jsdelivr.net/gh/peter5723/imagehost/img/net3.png" /></p>
<p>我们用 <code>ipconfig /all</code> 查看本机的 IP 地址是 <code>10.192.252.13</code>，DNS 服务器是 <code>10.10.0.21</code> 与 <code>10.10.2.21</code>，这是使用浙大校网使用的 DNS 服务器。这与上面抓包的结果一致。我们打开 DNS 服务器的响应报文，如下所示：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>Frame 109837: 532 bytes on wire (4256 bits), 532 bytes captured (4256 bits) on interface \Device\NPF_{B8D67097-65C7-4EE3-90AD-955585FA85A3}, id 0
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>Ethernet II, Src: H3CTechnolog_ff:80:10 (00:0f:e2:ff:80:10), Dst: Intel_25:25:88 (9c:b1:50:25:25:88)
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>Internet Protocol Version 4, Src: 10.10.0.21, Dst: 10.193.252.13
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>User Datagram Protocol, Src Port: 53, Dst Port: 50849
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>Domain Name System (response)
<a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a>    Transaction ID: 0x0002
<a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a>    Flags: 0x8180 Standard query response, No error
<a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a>    Questions: 1
<a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a>    Answer RRs: 2
<a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a>    Authority RRs: 13
<a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a>    Additional RRs: 13
<a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a>    Queries
<a id="__codelineno-6-13" name="__codelineno-6-13" href="#__codelineno-6-13"></a>    Answers
<a id="__codelineno-6-14" name="__codelineno-6-14" href="#__codelineno-6-14"></a>        bing.com: type A, class IN, addr 150.171.27.10
<a id="__codelineno-6-15" name="__codelineno-6-15" href="#__codelineno-6-15"></a>        bing.com: type A, class IN, addr 150.171.28.10
<a id="__codelineno-6-16" name="__codelineno-6-16" href="#__codelineno-6-16"></a>    Authoritative nameservers
<a id="__codelineno-6-17" name="__codelineno-6-17" href="#__codelineno-6-17"></a>    Additional records
<a id="__codelineno-6-18" name="__codelineno-6-18" href="#__codelineno-6-18"></a>    [Request In: 109836]
<a id="__codelineno-6-19" name="__codelineno-6-19" href="#__codelineno-6-19"></a>    [Time: 0.002144000 seconds]
</code></pre></div>
<p>可以知道服务器的端口号是53，本机的端口号是50849，传输的方式是 UDP，返回的结果在 <code>answer</code> 条目中，其中一个 IP 地址是 <code>150.171.27.10</code>，就是 <code>bing.com</code> 对应的 IP 地址。这与 <code>nslookup</code> 的输出结果是一致的。当然，出于多种原因，直接在浏览器中输入解析的 IP 地址是一般是打不开对应网页的，<a href="https://blog.csdn.net/gui951753/article/details/83070180">原因在这里，大概是反向代理，我暂时不研究</a></p>
<p>这个链接较好，可以看看。<a href="https://zhuanlan.zhihu.com/p/335814524">DNS 实验</a></p>
<p>在做实验的时候，发现现在 baidu ping 不通了，有说 baidu 是关闭了 ICMP 协议导致的，但是我 telnet 也连接不到。<a href="https://www.cnblogs.com/a-s-m/p/11167669.html">baidu ping
不到</a></p>
<p>上面动手实操了一下，下面我们继续学习原理。</p>
<p>应用程序调用 DNS 客户机端，指明主机名，主机 DNS 接收到后，向网络中发送 DNS 查询报文。一般请求和回答报文均使用 UDP 经端口 53 发送。经过若干时间，主机 DNS 从服务器接收到一个 DNS 回答报文，即可解析出 IP 地址。</p>
<p>看起来，DNS 是一个黑盒子。那么黑盒子内部如何？</p>
<p>DNS 是一个典型的分布式应用。有三种类型的 DNS 服务器：根 DNS 服务器，顶级域服务器（TLD）和权威 DNS 服务器。以及用于代理的本地 DNS 服务器。</p>
<p>下面图片比较清楚地展示了域名系统，域名系统与各级别 DNS 服务器相对应。</p>
<p><img alt="" src="https://cdn.jsdelivr.net/gh/peter5723/imagehost/img/net4.png" /></p>
<p>以 <code>www.baidu.com</code> 为例，<code>com</code> 是顶级域名，<code>baidu.com</code> 对应一个组织的权威域名服务器， <code>www</code> 是主机名，因特网中默认的主机名就叫 <code>www</code>。在 DNS 查询时，主机先将请求发送到本地 DNS 服务器，本地 DNS 服务器将该请求传到根 DNS 服务器，根 DNS 服务器注意到 <code>com</code> 前缀，于是向本地 DNS 服务器返回负责 <code>com</code> 的 TLD 的查询列表。本地 DNS 服务器向这些 TLD 发送查询报文。其中一个 TLD 服务器找到了 <code>baidu.com</code> 负责的权威 DNS 服务器，并用该权威 DNS 服务器的地址进行响应。最后，本地 DNS 服务器向该权威 DNS 服务器发送请求，寻找名为 <code>www</code> 的主机名。权威 DNS 服务器返回 <code>www</code> 的 IP 地址给本地服务器，本地服务器再将结果返还给我的主机，这样就完成了一整个 DNS 解析流程。</p>
<p>这样查询开销大，DNS 也有缓存技术来减少开销。</p>
<h2 id="transport-layer">第三章 运输层 transport-layer<a class="headerlink" href="#transport-layer" title="Permanent link">&para;</a></h2>
<h3 id="31">3.1 概述<a class="headerlink" href="#31" title="Permanent link">&para;</a></h3>
<p>首先仍然是概要：运输层为应用层的程序提供了“逻辑通信”功能。这里的“逻辑”是封装的意思。不同主机的应用层程序通过运输层连接好像直接相连一般，而不需要考虑实际的实现如何。运输层协议是在端系统中实现的。发送方的运输层将发送程序的报文转化成运输层分组，这个分组称为运输层报文段。然后将报文段传给网络层，网络层将其封装成网络层分组（称为数据报），向目的地发送。接收方的网络层提取出运输层报文段，向上交给运输层。</p>
<p>运输层为不同主机上的进程提供了逻辑通信，而网络层则提供了主机之间的逻辑通信。这句话，看自顶向下方法中的邮政服务例子就容易理解了。</p>
<p>运输层服务有两种：UDP 和 TCP。</p>
<p>首先介绍网络层。因特网网络层协议，有一个 IP 协议。IP 为主机之间提供逻辑通信。IP 的服务模型是尽力而为交付服务，是不可靠服务，数据可能丢失。每台主机至少有一个网络层地址，即 IP 地址。</p>
<p>再介绍运输层的具体任务。运输层协议的基本任务是将两个端系统之间的 IP 交付服务扩展成两个端系统上的进程之间的交付服务。主机间交互扩展成进程间交付的两个动作称为 transport-layer multiplexing and demultiplexing （多路复用和多路分解）。运输层协议可以在报文段的首部添加查错检测字段提供完整性检查。UDP 只进行数据交付和差错检测，也是不可靠服务，不保证数据完整性。TCP 提供附加服务：可靠数据传输和拥塞控制。</p>
<h3 id="32">3.2 多路复用和多路分解<a class="headerlink" href="#32" title="Permanent link">&para;</a></h3>
<p>然后讨论一下多路复用和多路分解。考虑这样的问题，我有四个网络应用进程在运行，我的计算机的运输层从底层的网络层接收数据时，<strong>如何将这些数据定位到其所需到达的进程？</strong></p>
<p>回想套接字。每个进程有一个或多个套接字和运输层交互。运输层是将数据交付给套接字的。每个套接字都有一个唯一标识符。所以关键是怎样将运输层报文段交接给合适的套接字。每个运输层报文段都有几个字段。在接收端，运输层检查这些字段，标识出接收套接字，然后将报文段定向到该套接字。将运输层报文段的数据交付到正确的套接字的工作叫多路分解（demultiplexing）。反过来，从源主机的不同套接字中收集数据块，并为每个数据块封装首部信息从而形成报文段，将报文段传给网络层的工作称为多路复用（multiplexing）。</p>
<p>再具体一点，多路复用的要求是：1、套接字有唯一标识符。2、每个报文段有特殊字段来指示该报文段所要交付的套接字。这个标识符以及特殊字段就是端口号。报文段的端口字段包括源端口号和目的端口号字段（其他字段后面讲述）。端口号是一个 16 bit 的数字，值为 0 到 65535。0 到 1023 的端口号被保留，用于基本的应用层协议（如 HTTP 是 80）。</p>
<p>这样，我们就可以对问题给出回答：</p>
<p><strong>运输层的多路分解服务实现</strong>：主机上的每一个套接字分配一个端口号，报文段到达主机时，运输层检查报文段中的目的端口号，再将之定向到对应的套接字，然后报文段中的数据通过套接字进入其所连接的进程。</p>
<p>UDP 的客户端服务器例子：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="c1"># service</span>
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="k">def</span><span class="w"> </span><span class="nf">service_one</span><span class="p">():</span>
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>    <span class="n">sock</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">AF_INET</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">SOCK_DGRAM</span><span class="p">)</span>
<a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a>    <span class="n">sock</span><span class="o">.</span><span class="n">bind</span><span class="p">((</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="mi">9001</span><span class="p">))</span>
<a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Service One is running on port 9001&quot;</span><span class="p">)</span>
<a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a>
<a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a>    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
<a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a>        <span class="n">data</span><span class="p">,</span> <span class="n">addr</span> <span class="o">=</span> <span class="n">sock</span><span class="o">.</span><span class="n">recvfrom</span><span class="p">(</span><span class="mi">65535</span><span class="p">)</span>
<a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Service One received from </span><span class="si">{</span><span class="n">addr</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">data</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a>        <span class="n">sock</span><span class="o">.</span><span class="n">sendto</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[Service One] Echo: </span><span class="si">{</span><span class="n">data</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">encode</span><span class="p">(),</span> <span class="n">addr</span><span class="p">)</span>
<a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a>
<a id="__codelineno-7-12" name="__codelineno-7-12" href="#__codelineno-7-12"></a><span class="c1"># client</span>
<a id="__codelineno-7-13" name="__codelineno-7-13" href="#__codelineno-7-13"></a><span class="k">def</span><span class="w"> </span><span class="nf">client_service_one</span><span class="p">():</span>
<a id="__codelineno-7-14" name="__codelineno-7-14" href="#__codelineno-7-14"></a>    <span class="n">sock</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">AF_INET</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">SOCK_DGRAM</span><span class="p">)</span>
<a id="__codelineno-7-15" name="__codelineno-7-15" href="#__codelineno-7-15"></a>    <span class="n">sock</span><span class="o">.</span><span class="n">sendto</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;Hello from Service One&quot;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="mi">9001</span><span class="p">))</span>
<a id="__codelineno-7-16" name="__codelineno-7-16" href="#__codelineno-7-16"></a>    <span class="n">data</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">sock</span><span class="o">.</span><span class="n">recvfrom</span><span class="p">(</span><span class="mi">65535</span><span class="p">)</span>
<a id="__codelineno-7-17" name="__codelineno-7-17" href="#__codelineno-7-17"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Response from Service One:&quot;</span><span class="p">,</span> <span class="n">data</span><span class="o">.</span><span class="n">decode</span><span class="p">())</span>
</code></pre></div>
<p>可以模拟，抓包一下，抓包要选择 <code>Npcap Loopback Adapter</code> 接口，对应 <code>127.0.0.1</code> 本地回环流量。</p>
<p>然后我们再看一下 TCP 的代码：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="c1">#service</span>
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="k">def</span><span class="w"> </span><span class="nf">service_one</span><span class="p">():</span>
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>    <span class="c1"># 创建TCP套接字</span>
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a>    <span class="n">sock</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">AF_INET</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">SOCK_STREAM</span><span class="p">)</span>
<a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a>    <span class="c1"># 绑定地址和端口</span>
<a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a>    <span class="n">sock</span><span class="o">.</span><span class="n">bind</span><span class="p">((</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="mi">9001</span><span class="p">))</span>
<a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a>    <span class="c1"># 开始监听</span>
<a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a>    <span class="n">sock</span><span class="o">.</span><span class="n">listen</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Service One (TCP) is running on port 9001&quot;</span><span class="p">)</span>
<a id="__codelineno-8-10" name="__codelineno-8-10" href="#__codelineno-8-10"></a>
<a id="__codelineno-8-11" name="__codelineno-8-11" href="#__codelineno-8-11"></a>    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
<a id="__codelineno-8-12" name="__codelineno-8-12" href="#__codelineno-8-12"></a>        <span class="n">client_socket</span><span class="p">,</span> <span class="n">addr</span> <span class="o">=</span> <span class="n">sock</span><span class="o">.</span><span class="n">accept</span><span class="p">()</span>
<a id="__codelineno-8-13" name="__codelineno-8-13" href="#__codelineno-8-13"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Service One: 客户端 </span><span class="si">{</span><span class="n">addr</span><span class="si">}</span><span class="s2"> 已连接&quot;</span><span class="p">)</span>
<a id="__codelineno-8-14" name="__codelineno-8-14" href="#__codelineno-8-14"></a>
<a id="__codelineno-8-15" name="__codelineno-8-15" href="#__codelineno-8-15"></a>        <span class="n">data</span> <span class="o">=</span> <span class="n">client_socket</span><span class="o">.</span><span class="n">recv</span><span class="p">(</span><span class="mi">65535</span><span class="p">)</span>
<a id="__codelineno-8-16" name="__codelineno-8-16" href="#__codelineno-8-16"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Service One received: </span><span class="si">{</span><span class="n">data</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-8-17" name="__codelineno-8-17" href="#__codelineno-8-17"></a>
<a id="__codelineno-8-18" name="__codelineno-8-18" href="#__codelineno-8-18"></a>        <span class="n">response</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;[Service One] Echo: </span><span class="si">{</span><span class="n">data</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span>
<a id="__codelineno-8-19" name="__codelineno-8-19" href="#__codelineno-8-19"></a>        <span class="n">client_socket</span><span class="o">.</span><span class="n">sendall</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
<a id="__codelineno-8-20" name="__codelineno-8-20" href="#__codelineno-8-20"></a>        <span class="n">client_socket</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<a id="__codelineno-8-21" name="__codelineno-8-21" href="#__codelineno-8-21"></a><span class="c1">#client</span>
<a id="__codelineno-8-22" name="__codelineno-8-22" href="#__codelineno-8-22"></a><span class="k">def</span><span class="w"> </span><span class="nf">client_service_one</span><span class="p">():</span>
<a id="__codelineno-8-23" name="__codelineno-8-23" href="#__codelineno-8-23"></a>    <span class="n">sock</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">AF_INET</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">SOCK_STREAM</span><span class="p">)</span>
<a id="__codelineno-8-24" name="__codelineno-8-24" href="#__codelineno-8-24"></a>    <span class="n">sock</span><span class="o">.</span><span class="n">connect</span><span class="p">((</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="mi">9001</span><span class="p">))</span>
<a id="__codelineno-8-25" name="__codelineno-8-25" href="#__codelineno-8-25"></a>    <span class="n">sock</span><span class="o">.</span><span class="n">sendall</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;Hello from Service One (TCP)&quot;</span><span class="p">)</span>
<a id="__codelineno-8-26" name="__codelineno-8-26" href="#__codelineno-8-26"></a>
<a id="__codelineno-8-27" name="__codelineno-8-27" href="#__codelineno-8-27"></a>    <span class="n">data</span> <span class="o">=</span> <span class="n">sock</span><span class="o">.</span><span class="n">recv</span><span class="p">(</span><span class="mi">65535</span><span class="p">)</span>
<a id="__codelineno-8-28" name="__codelineno-8-28" href="#__codelineno-8-28"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Response from Service One:&quot;</span><span class="p">,</span> <span class="n">data</span><span class="o">.</span><span class="n">decode</span><span class="p">())</span>
<a id="__codelineno-8-29" name="__codelineno-8-29" href="#__codelineno-8-29"></a>    <span class="n">sock</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre></div>
<p>我们可以看到 UDP 和 TCP 的区别。UDP 是直接发送，直接接收的。TCP 多了一步 <code>sock.connect(('127.0.0.1', 9001))</code>。TCP 是先再两台主机之间建立连接才交流数据，而 UDP 不需要。所以说 TCP 是面向连接的，UDP 是无连接的。</p>
<h3 id="33-udp">3.3 UDP 协议<a class="headerlink" href="#33-udp" title="Permanent link">&para;</a></h3>
<p>UDP （User Datagram Protocol，用户数据报协议）是非常简单的协议——它只做了运输层协议必须做的最少工作：多路复用/分解、差错检测。</p>
<p>UDP 的工作过程：</p>
<p>UDP takes messages from the application process, attaches source and destination port number fields for the multi
plexing/demultiplexing service, adds two other small fields, and passes the resulting segment to the network layer.
The network layer encapsulates the transport-layer segment into an IP datagram and then makes a best-effort attempt to deliver the segment to the receiving host.
If the segment arrives at the receiving host, UDP uses the destination port number to deliver the segment's data to the correct application process.</p>
<p>UDP 在发送报文段之前，发送方和接收方的实体之间没有进行握手建立连接，所以说 UDP 是无连接的。</p>
<p>DNS 服务一般就使用 UDP 协议。</p>
<p>用 wireshark 抓一下包，就可以看 UDP 报文段结构：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>Frame 248: 54 bytes on wire (432 bits), 54 bytes captured (432 bits) on interface \Device\NPF_Loopback, id 0
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>Null/Loopback
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a>Internet Protocol Version 4, Src: 127.0.0.1, Dst: 127.0.0.1
<a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a>User Datagram Protocol, Src Port: 51604, Dst Port: 9001
<a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a>    Source Port: 51604
<a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a>    Destination Port: 9001
<a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a>    Length: 30
<a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a>    Checksum: 0x2cd7 [unverified]
<a id="__codelineno-9-9" name="__codelineno-9-9" href="#__codelineno-9-9"></a>    [Checksum Status: Unverified]
<a id="__codelineno-9-10" name="__codelineno-9-10" href="#__codelineno-9-10"></a>    [Stream index: 7]
<a id="__codelineno-9-11" name="__codelineno-9-11" href="#__codelineno-9-11"></a>    [Timestamps]
<a id="__codelineno-9-12" name="__codelineno-9-12" href="#__codelineno-9-12"></a>    UDP payload (22 bytes)
<a id="__codelineno-9-13" name="__codelineno-9-13" href="#__codelineno-9-13"></a>Data (22 bytes)
</code></pre></div>
<p>UDP 报文段结构由报文头和报文组成。报文头包含四个字段：源端口号、目的端口号、报文长度、校验和。报文就是应用层数据。</p>
<p>简单介绍一下校验和。发送方将所有字节相加（不考虑溢出），再对结果取反，得到一个校验和。接收方接收时，将所有字节相加，加上校验和，结果应当是所有二进制位均为 1。否则就说明这个分组出现了差错。</p>
<p>UDP 提供了差错检测，但其无法进行差错恢复。</p>
<h3 id="34">3.4 可靠数据传输<a class="headerlink" href="#34" title="Permanent link">&para;</a></h3>
<p>这个链接很好：<a href="https://blog.csdn.net/Sqrt1230/article/details/121269131">可靠数据传输原理详细图解</a></p>
<p>​​可靠数据传输（Reliable Data Transfer）​​，下称 rdt。</p>
<p>我们简单介绍一下，分析一下解决问题的思路。</p>
<p>首先，假设运输层的下层不出任何差错。那我们什么都不用干。这是 rdt1.0。</p>
<p>但是，底层信道大概率会出现比特差错，即 01 互换。我们引入自动重传请求（ARQ）协议。接收者在接收数据后，进行差错检测，提供反馈给发送者，回送肯定确认分组（ACK）或者否定确认分组（NAK）。发送方接收到确认信息后，重传这个分组。发送方在等待 ACK 时，不做其他事情，这样的协议被称为停等（stop and wait）协议。</p>
<p>但是可能出现这样的问题：ACK 出错了怎么办？</p>
<p>简单的解决方法是：在发送的分组中添加一个1 bit序号字段，如果是新包就变字段，如果是重传就不变。第一个包是 0，第二个包是新包则是 1，如果是第一个包的重传则是 0，以此类推。101010 就是一直新的数据包，10010 第三次是第二次的重传。这是 rdt2.0。</p>
<p>现在再加入新的问题：如果丢包，怎么解决？如果分组丢失，当然连 ACK 都接收不到了。最简单的方法是加入一个定时器计时。发送方发送一个分组时启动一个倒计数定时器，如果在倒计数定时器倒计时结束之前收到了ACK响应，则中断定时器，进入准备接收来自上层的下一次调用。如果倒计数定时器超时，则发送方认为分组丢失，向接收方重传该分组，并且重新启动定时器。这是 rdt3.0。</p>
<p>rdt3.0 可以说比较可靠。但是它是停等协议，效率极低。简单的解决方法称为“流水线”：发送方发送多个分组而无需等待确认，每个分组一个个处理。流水线中差错恢复两种基本方法：回退 N 步和选择重传。</p>
<h3 id="35-tcp">3.5 TCP<a class="headerlink" href="#35-tcp" title="Permanent link">&para;</a></h3>
<p>TCP 全称为 Transmission Control Protocol，即传输控制协议。TCP 是运输层面向连接的可靠运输协议。其运用的原理包括差错检测、重传、累积确认、定时器等。</p>
<p>我们来复习一下 TCP 连接是怎样建立的。一个进程想要与另一个进程建立连接。发起连接请求的进程称为客户进程，另一个进程成为服务器进程。python 代码 <code>sock.connect(('127.0.0.1', 9001))</code> 就实现了这样的请求，建立连接。建立连接的过程就是三次握手：the client first
sends a special TCP segment;
the server responds with a second special TCP segment;
and finally the client responds again with a third special segment.
The first two segments carry no payload, that is, no application-layer data; the third of these
segments may carry a payload.</p>
<p>建立连接后，两个进程间就可以发送数据了。TCP 连接是点对点的，单个发送方与单个接收方之间建立。</p>
<p>TCP 连接组成包括：一台主机上的缓存、变量和与进程连接的套接字。</p>
<p>客户进程通过套接字传递数据流到 TCP。TCP 将这些数据引导到发送缓存中。接下来 TCP 就会不时地从发送缓存中取出一块数据，传递到网络层。TCP 可从缓存中取出并放入报文段中的数据数量受限于最大报文段长度 (Maximum Segment Size, MSS)。TCP 为每块客户数据配上一个 TCP 首部，从而形成多个 TCP 报文段 (TCP segment)。这些报文段被下传给网络层， 网络层将其分别封装在网络层IP数据报中。 然后这些IP数据报被发送到网络中。 当TCP在另一端接收到一个报文段后，该报文段的数据就被放入该 TCP 连接的接收缓存中。 应用程序从此缓存中读取数据流。 该连接的每一端都有各自的发送缓存和接收缓存。</p>
<p>然后，我们看一下 TCP 报文段的结构。可见 TCP 首部有固定的 20 字节。</p>
<p><img alt="" src="https://cdn.jsdelivr.net/gh/peter5723/imagehost/img/net5.png" /></p>
<p><code>curl</code> 是一个比较方便的测试 web 的工具。我们在命令行中输入 <code>curl -v www.baidu.com</code>，它会向百度发送 HTTPS 请求，百度会返回网页。我们输入这个指令，用 wireshark 抓包，过滤 TCP 请求，先看看 TCP 报文段的结构。下面是第一次握手的 TCP 报文段。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>Transmission Control Protocol, Src Port: 51999, Dst Port: 80, Seq: 0, Len: 0
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>    Source Port: 51999
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a>    Destination Port: 80
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a>    [Stream index: 7]
<a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a>    [Conversation completeness: Incomplete, DATA (15)]
<a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a>    [TCP Segment Len: 0]
<a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a>    Sequence Number: 0    (relative sequence number)
<a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a>    Sequence Number (raw): 619352399
<a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a>    [Next Sequence Number: 1    (relative sequence number)]
<a id="__codelineno-10-10" name="__codelineno-10-10" href="#__codelineno-10-10"></a>    Acknowledgment Number: 0
<a id="__codelineno-10-11" name="__codelineno-10-11" href="#__codelineno-10-11"></a>    Acknowledgment number (raw): 0
<a id="__codelineno-10-12" name="__codelineno-10-12" href="#__codelineno-10-12"></a>    1000 .... = Header Length: 32 bytes (8)
<a id="__codelineno-10-13" name="__codelineno-10-13" href="#__codelineno-10-13"></a>    Flags: 0x002 (SYN)
<a id="__codelineno-10-14" name="__codelineno-10-14" href="#__codelineno-10-14"></a>    Window: 65535
<a id="__codelineno-10-15" name="__codelineno-10-15" href="#__codelineno-10-15"></a>    [Calculated window size: 65535]
<a id="__codelineno-10-16" name="__codelineno-10-16" href="#__codelineno-10-16"></a>    Checksum: 0xa281 [unverified]
<a id="__codelineno-10-17" name="__codelineno-10-17" href="#__codelineno-10-17"></a>    [Checksum Status: Unverified]
<a id="__codelineno-10-18" name="__codelineno-10-18" href="#__codelineno-10-18"></a>    Urgent Pointer: 0
<a id="__codelineno-10-19" name="__codelineno-10-19" href="#__codelineno-10-19"></a>    Options: (12 bytes), Maximum segment size, No-Operation (NOP), Window scale, No-Operation (NOP), No-Operation (NOP), SACK permitted
<a id="__codelineno-10-20" name="__codelineno-10-20" href="#__codelineno-10-20"></a>    [Timestamps]
</code></pre></div>
<p>TCP 报文段由首部字段和数据字段组成。上面这个是首部字段，第一次握手的话，没有数据字段。</p>
<p>TCP 首部首先是源端口号和目的端口号。源端口号就是 <code>curl</code> 进程的端口，目的端口号是 HTTP，默认是 80。然后就是 32 bit 的序列号字段（Sequence Number）和 32 bit 的确认号字段（Acknowledgment Number），用来实现可靠传输服务。然后是 6 bit 的标志字段（flag），ACK 表示成功接收报文段，RST、SYN、FIN 用于连接建立和拆除。
再是 16 bit 的接收窗口字段（window），用于流量控制，表示接收方愿意接受的字节数量。然后是校验和字段。
再是选项字段（Option），包括最大报文段长度（MSS）、时间戳等。</p>
<p>TCP 首部最重要的两个字段是序列号和确认号字段，是可靠传输服务的关键部分。TCP 将数据当成字节流处理。一个报文段的序列号是该报文段<strong>首字节</strong>的字节流编号。假设传输的数据有 500 000 字节，MSS（报文段最大长度）为 1000 字节，则这个数据将被划分成 500 个报文段，第一个报文段的序号是 0，第二个是 1000，以此类推。</p>
<p>确认号是这样的：TCP 是全双工，即主机 A 向 B 发送数据的时候，也同时接收来自主机 B 的数据。从主机 B 到达 A 的每个报文段中都有一个序号用于从 B 流向 A 的数据。主机 A 填充进报文段的确认号是主机 A 期望从主机 B 收到的下一字节的序号。举例：主机 A 从 B 中收到了编号为 0 到 535 的所有字节，并正要发送一个报文段给主机 B，那么 A 就会在确认号字段中填上 536。</p>
<p>知道这些，我们可以看看 TCP 的可靠数据传输的原理大致如何。</p>
<p>主机 A 向主机 B 发送一个大文件。发送基本的事件有三个：上层应用数据接收数据，封装成报文段，启动定时器。如果定时器到时间没有收到 ACK，则默认丢包，进行重传。</p>
<p>如下图所示：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>发送端                          接收端
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>   |                                 |
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>   |---[SEQ=0, LEN=1000]-----------&gt;|    # 发送段
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a>   |&lt;--[ACK=1001]--------------------|    # 确认收到
<a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a>   |                                 |
<a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a>   |---[SEQ=1000, LEN=1000]--------&gt;|    # 发送下一数据段
<a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a>   |&lt;--[ACK=2001]--------------------|    # 继续确认
</code></pre></div>
<p>若某段丢失：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>   |---[SEQ=2000, LEN=1000]--------&gt;|    # 发送段
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>   |                                 |
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a>   |&lt;-- (未响应)                     |
<a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a>   |                                 |
<a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a>   |------(等待超时)----------------&gt;|
<a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a>   |---[SEQ=2000, RETRANSMITTED]---&gt;|    # 重传该段
<a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a>   |&lt;--[ACK=3001]--------------------|    # 接收方确认收到
</code></pre></div>
<p>下面的图片，抓取了 <code>curl -v www.baidu.com</code> 客户机与服务器进行数据交换的过程。观察客户机发送报文的 ack 和 服务器发送的报文的 seq。</p>
<p><img alt="" src="https://cdn.jsdelivr.net/gh/peter5723/imagehost/img/net6.png" /></p>
<p>最后我们来看看建立和断开 TCP 连接的过程。</p>
<p>三次握手建立连接：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>Client                  Server
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a>   |                         |
<a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a>   |----[SYN, SEQ=x]--------&gt;|
<a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a>   |&lt;--[SYN-ACK, SEQ=y, ACK=x+1]--|
<a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a>   |----[ACK, SEQ=x+1, ACK=y+1]--&gt;|
</code></pre></div>
<ol>
<li>客户机端的 TCP 先向服务器端的 TCP 发送一个特殊的 TCP 报文段。该报文段不含应用层数据，SYN 比特置为 1。客户端选择了一个初始序列号 x。</li>
<li>SYN 报文段的 IP 数据报到达服务器主机，服务器提取出 TCP SYN 报文段，为该 TCP 连接分配 TCP 缓存和变量，向用户发送允许连接的 SYNACK 报文段。服务器选择了一个初始序列号 y。</li>
<li>收到 SYNACK 报文段后，客户机给连接分配缓存和变量，并给服务器发送一个 ACK 报文段，对服务器的报文段进行确认。之后，客户机与服务器就可以相互发送数据了。客户端的序列号加 1。</li>
</ol>
<p>四次挥手断开连接：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>Client                  Server
<a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a>   |                         |
<a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a>   |----[FIN, SEQ=u]--------&gt;|
<a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a>   |&lt;--[ACK, SEQ=v, ACK=u+1]--|
<a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a>   |&lt;--[FIN, SEQ=w]----------|
<a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a>   |----[ACK, SEQ=u+1, ACK=w+1]--&gt;|
</code></pre></div>
<ol>
<li>客户机想要关闭连接，先发送一个 FIN 报文段</li>
<li>服务器接收到，回送一个 ACK 报文段表示确认</li>
<li>服务器发送一个 FIN 报文段，表示可以终止连接</li>
<li>客户机发送 ACK 报文段，关闭连接</li>
</ol>
<p>下面的图片，展示了用 <code>curl</code> 进行连接的三次握手以及后续传输数据的过程。</p>
<p><img alt="" src="https://cdn.jsdelivr.net/gh/peter5723/imagehost/img/net7.png" /></p>
<p>为了节省开销，默认情况下，HTTP/1.1 会复用 TCP 连接（Connection: keep-alive），避免频繁握手。这点我们查看抓包中的 http 协议就可以确认。因此 <code>curl</code> 执行完毕后没有发送 FIN 报文段。</p>
<p>TCP 除了可靠传输，还有拥塞控制，来处理网络拥塞问题。</p>
<h2 id="_4">第四章 网络层<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h2>
<h3 id="41">4.1 概述<a class="headerlink" href="#41" title="Permanent link">&para;</a></h3>
<p>网络层实现主机到主机的通信服务。</p>
<p>网络层的两个功能，转发（forward）和选路（route）。</p>
<ul>
<li>转发：一个分组到达某个路由器的输入链路时，这个路由器必须将该分组移动到适当的输出链路。——对一个路由器而言</li>
<li>选路：当分组从发送方流向接收方的时候，网络层必须决定这些分组所采用的路由或者路径。——对整个传输而言</li>
</ul>
<p>一台执行分组转发功能的机器，称为路由器（router）</p>
<p>网络服务模型。因特网的网络层提供的服务称为尽力而为服务：既不保证定时，也不保证顺序，也不保证不丢失。</p>
<h3 id="42">4.2 路由器<a class="headerlink" href="#42" title="Permanent link">&para;</a></h3>
<p>路由器完成网络层的转发功能，将分组从一台路由器的入链路传送到适当的出链路。</p>
<p>每台路由器有一个转发表。路由器通过检查到达的分组的首部中某一个字段的值，然后用这个值在路由器的转发表中索引查询，查询的结果是分组将被转发出去的那个输出链路接口。</p>
<p>选路算法决定了一个路由器中转发表的值。</p>
<p>路由器结构图。</p>
<p><img alt="" src="https://cdn.jsdelivr.net/gh/peter5723/imagehost/img/net8.png" /></p>
<p>路由器由 4 个部分组成。</p>
<ul>
<li>输入端口：输入端口做好几件事情。首先要执行将输入的物理链路接到路由器的物理层功能。然后是链路层功能，与链路层交互（协议、拆分）。还有查找与转发功能，使得交换结构部分的分组能够出现在适当的输出端口。还要将控制分组（control packet）（携带选路协议信息的分组）从输入端口转发到选路处理器。</li>
<li>交换结构：交换结构将路由器的输入端口连接到它的输出端口。</li>
<li>输出端口：输出端口接收交换结构转发给它的分组，将这些分组传输给输出链路。</li>
<li>选路处理器：选路处理器执行选路协议，维护选路信息和转发表。</li>
</ul>
<p>下面看看输入端口的结构。</p>
<p><img alt="" src="https://cdn.jsdelivr.net/gh/peter5723/imagehost/img/net9.png" /></p>
<p>在其中包括线路端接、数据链路处理（协议、拆分）、查找输出端口并转发（可能要排队）、送至交换结构四个步骤。</p>
<p>交换结构可通过三种方式完成。内存交换、一根总线交换、多个总线纵横交换。</p>
<p>输出端口结构和输入端口结构基本一致，只是次序反过来。</p>
<p>如果输入速率大于输出速率，则等待处理的分组放在缓冲区中排队。</p>
<h3 id="43-the-internet-protocolip">4.3 网际协议（The Internet Protocol，IP）<a class="headerlink" href="#43-the-internet-protocolip" title="Permanent link">&para;</a></h3>
<p>现在我们学习大名鼎鼎的 IP 协议。</p>
<p>因特网网络层由三个部分组成</p>
<ul>
<li>IP 协议，确定网络层中主机的编址规则、数据报的格式与分组处理的规则</li>
<li>选路协议（如 BGP），决定数据报从源到目的地所经过的路径</li>
<li>差错报告设施，用于报告数据差错和对某些网络层信息请求进行响应，如 ICMP 协议。ping 就是基于 ICMP 协议来检测网络。</li>
</ul>
<p><img alt="" src="https://cdn.jsdelivr.net/gh/peter5723/imagehost/img/net10.jpg" /></p>
<h4 id="ipv4">IPv4 数据报格式<a class="headerlink" href="#ipv4" title="Permanent link">&para;</a></h4>
<p>然后我们看看 IPv4 协议的数据报格式。IPv4 的数据报格式如下图所示：</p>
<p><img alt="" src="https://cdn.jsdelivr.net/gh/peter5723/imagehost/img/net11.png" /></p>
<p>随便打开 wireshark 抓包看看：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>Internet Protocol Version 4, Src: 114.55.100.69, Dst: 10.193.179.172
<a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a>    0100 .... = Version: 4
<a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a>    .... 0101 = Header Length: 20 bytes (5)
<a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a>    Differentiated Services Field: 0x04 (DSCP: LE, ECN: Not-ECT)
<a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a>    Total Length: 86
<a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a>    Identification: 0x2645 (9797)
<a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a>    010. .... = Flags: 0x2, Don&#39;t fragment
<a id="__codelineno-15-8" name="__codelineno-15-8" href="#__codelineno-15-8"></a>    ...0 0000 0000 0000 = Fragment Offset: 0
<a id="__codelineno-15-9" name="__codelineno-15-9" href="#__codelineno-15-9"></a>    Time to Live: 53
<a id="__codelineno-15-10" name="__codelineno-15-10" href="#__codelineno-15-10"></a>    Protocol: TCP (6)
<a id="__codelineno-15-11" name="__codelineno-15-11" href="#__codelineno-15-11"></a>    Header Checksum: 0x8a6f [validation disabled]
<a id="__codelineno-15-12" name="__codelineno-15-12" href="#__codelineno-15-12"></a>    [Header checksum status: Unverified]
<a id="__codelineno-15-13" name="__codelineno-15-13" href="#__codelineno-15-13"></a>    Source Address: 114.55.100.69
<a id="__codelineno-15-14" name="__codelineno-15-14" href="#__codelineno-15-14"></a>    Destination Address: 10.193.179.172
</code></pre></div>
<p>然后我们解释一下各个部分的内容。</p>
<ul>
<li>版本：这里是 4，表示 IPv4</li>
<li>首部长度：确定数据报的数据部分从哪里开始。如果没有选项，则是 20 字节。（以 32 位为单位）</li>
<li>服务类型（TOS）：指定数据报的处理方式，例如优先级、延迟、吞吐量等。现代网络中通常使用区分服务代码点（DSCP）和显式拥塞通知（ECN）来扩展此字段。</li>
<li>总长度：首部加上数据的长度。该字段长 16 位，所以理论最大长度为 65535 字节。</li>
<li>标识、标志、片偏移：用于分片。DF 标志禁止分片。</li>
<li>生存时间（TTL）：8 位，表示数据报的最大跳数（hop count）。每经过一个路由器，TTL值减1，当TTL为 0 时丢弃数据报，防止数据报在网络中无限循环。</li>
<li>协议：指示这个 IP 数据报的数据部分应该交给哪一个运输层协议。如上面的数据报中该值是 6，则交给 TCP 协议。</li>
<li>首部校验和：用于检验数据报中的比特错误。</li>
<li>源 IP 地址</li>
<li>目的 IP 地址</li>
<li>选项</li>
<li>填充：使首部长度为 32 位的整数倍。</li>
<li>数据（有效载荷）</li>
</ul>
<h4 id="ipv4_1">IPv4 编址<a class="headerlink" href="#ipv4_1" title="Permanent link">&para;</a></h4>
<p>下面我们来看看 IPv4 编址。</p>
<p>主机和物理链路之间有一个接口（interface）连接。而路由器的任务是从链路上接收数据报并将这些数据报从其他链路转发，故路由器有多个接口，每个接口对应一条链路。IP 协议要求每台主机和路由器的接口都有自己的 IP 地址。</p>
<p>每个 IP 地址长度是 32 位，按字节分开。举例 IP：<code>192.168.30.2</code>。这种写法称为点分十进制。</p>
<p>一些特殊 IP 地址：</p>
<ul>
<li><code>127.0.0.1</code>（本地回环地址）</li>
<li><code>0.0.0.0</code>（默认路由）</li>
<li><code>255.255.255.255</code>（广播地址）</li>
</ul>
<p>由于 IPv4 地址资源有限，用子网划分（subnetting）允许将一个大的网络划分为多个小的子网，以提高地址利用率。一个 IPv4 地址可以分为网络部分和主机部分。这种分配策略称为 CIDR（无类别域间路由）。</p>
<p>一个地址的形式为 <code>a.b.c.d/x</code>。<code>x</code> 指示 IP 地址的网络部分，地址前 <code>x</code> 位称为地址的前缀（prefix）。一个组织内部设备的 IP 地址的前缀都是相同的。在选路时，组织外部的路由器只需考虑地址前缀即可。</p>
<p>一个地址的后 <code>32-x</code> 位是主机部分，用于区分组织的内部设备（主机）。 举例，<code>x=24</code>，则后 8 位用于区分不同的设备。</p>
<p>我们可以使用子网掩码（subnet mask）来区分网络和主机部分，比如子网掩码是 <code>255.255.255.0</code>，即表示前 24 位是网络 IP。</p>
<p>网络地址相同的接口可以构成一个子网。下面图中，3 台路由器构成了 6 个子网。</p>
<p><img alt="" src="https://cdn.jsdelivr.net/gh/peter5723/imagehost/img/net12.png" /></p>
<h4 id="ip-dhcp">获取 IP 地址，DHCP 协议<a class="headerlink" href="#ip-dhcp" title="Permanent link">&para;</a></h4>
<p>然后我们看看在因特网中，主机和组织如何获取 IP 地址。</p>
<p>首先，一个组织获得从一个 ISP 那里获得一块地址。然后，这个主机为组织内的主机和路由器接口分配独立的 IP 地址。我们有的时候会自己手动配（比如在局域网连开发板的时候），但是在因特网中连接的话，一般就使用 DHCP 协议来给我们自动分配好。</p>
<p>DHCP 协议，全称 Dynamic Host Configuration Protocol，动态主机配置协议，自动为网络中的主机分配 IP 地址。它是一个基于 UDP 的应用层协议，是客户端-服务器模型。</p>
<p>为一个新主机，其通过四个步骤完成地址分配，称为 DORA。</p>
<ol>
<li>Discover（发现）：这个新主机首先要寻找可用的 DHCP 服务器。客户机在 UDP 分组中向端口 67 发送 <code>DHCP Discover</code> 报文。但是它没有 IP 怎么办？不知道服务器地址怎么办？解决方法是使用源地址 <code>0.0.0.0</code>，目的地址使用 <code>255.255.255.255</code>，这是个广播地址，可以将这个分组传送到所有与这个子网连接的子网。</li>
<li>Offer（提供）：DHCP 服务器收到了 <code>DHCP Discover</code> 报文，然后它用一个 <code>DHCP Offer</code> 报文对客户机响应，当然，目标地址仍然需要用 <code>255.255.255.255</code> 进行广播。在报文中有可供客户机选择的 IP 地址、子网掩码等参数。</li>
<li>Request（请求）：服务器可能不止一个，客户端会收到许多 Offer，它选择其中一个 Offer，再广播 <code>DHCP Request</code> 报文，确认请求这个 IP。</li>
<li>ACK（确认）：服务器确认，发送 <code>DHCP ACK</code> 报文，完成分配。</li>
</ol>
<h4 id="nat">NAT<a class="headerlink" href="#nat" title="Permanent link">&para;</a></h4>
<p>NAT，全称 Network Address Translation，网络地址转换。为啥需要？在一个子网中，可能有非常多的设备连在一起，访问互联网。那 IPv4 的话只有 32 位，可能分配不过来。于是就引入了 NAT 技术。子网中的内部主机 IP 地址可能类似于 <code>10.0.0.1</code>，<code>10.0.0.2</code>，<code>10.0.0.3</code> 等等，它们和 NAT 路由器 <code>10.0.0.4</code> 相连。NAT 路由器还有一个对外的 IP 地址，比如 <code>138.76.29.7</code>。NAT 路由器将数据报的源私有 IP 替换成路由器的公有 IP，并记录转换映射。路由器接收外部服务器的响应后，再根据映射表将响应发送到对应的主机，就完成了一整个通讯过程。</p>
<h4 id="ipv6">IPv6<a class="headerlink" href="#ipv6" title="Permanent link">&para;</a></h4>
<h4 id="_5">子网和网关<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h4>
<p>首先我们来看子网的定义。 IP 地址与子网掩码进行与运算得到相同结果的设备组成一个子网。这样的定义不是很严格，但是只是讨论一下。</p>
<p>我们来解答这样一个问题吧：为什么不同子网下的主机不能直接通信呢？</p>
<p>这个问题，把链路层的知识学了，才能解决。</p>
<p>两台主机间传输数据，到链路层一定要找到 IP 地址对应的 MAC 地址。我们知道这时通过 ARP 协议完成。而 ARP 查询分组只在一个子网中广播。所以如果两台主机处于不同子网，那么就找不到目标主机的 MAC 地址，也就没有办法连接了。</p>
<p>注意这点，<strong>广播报文是不会跨子网传播的。</strong></p>
<p>但是跨子网连接的例子有很多，比如因特网就跨子网连接了，这怎么做到的呢？因为有网关（gateway）。网关是一类设备或节点，用于在不同网络或者子网间传输数据。路由器就是一个常见的网关，因为它的接口可以有不同的网络层 IP 地址。</p>
<p>我们来看下面这张图的例子，一台路由器连着两个子网，子网 1 中的网络地址是 <code>111.111.111/24</code>，子网 2 的网络地址是 <code>222.222.222/24</code>。现在子网 1 的主机 <code>111.111.111.111</code> 要向子网 2 的主机 <code>222.222.222.222</code> 发送数据报，要怎么做呢？首先仍然发送主机向其适配器传递数据报，但是还要传递一个目的 MAC 地址用于帧的封装。MAC 地址不可以是 222 的 MAC 地址，因为子网 1 中 ARP 查询查不到，也就连不上。正确答案是路由器接口 1 的 MAC 地址 <code>E6-E9-00-17-BB-4B</code>，这是可以通过 ARP 查询获得的。路由器从接口 1 获得帧后将之解封，传给路由器的网络层。然后路由器根据目的 IP 地址查询转发表，知道要从接口 2 送出去。此时这个帧的目的地址才是 222 的物理 MAC 地址，路由器可以通过 ARP 查询获得。</p>
<p><img alt="" src="https://cdn.jsdelivr.net/gh/peter5723/imagehost/img/net18.png" /></p>
<p>所以在上面的例子中，路由器就充当了网关的角色。而对主机来说，网关就是外部网络的唯一出口，比如上面的例子中，子网 1 的网关地址就是 <code>111.111.111.110</code>。设备在连接时，首先判断目标是否是在同一子网，是就可以直接连接，不是就要走网关转发。</p>
<p>一般默认网关地址是 <code>192.168.1.1</code>。路由器除了负责网关，DHCP 和 NAT 服务也是它负责的。</p>
<p>配置局域网时，假设两个设备网络层地址不同，它们能不能连上，取决于有没有配置好网关，可以通过路由器转发。</p>
<h3 id="44">4.4 选路<a class="headerlink" href="#44" title="Permanent link">&para;</a></h3>
<p>选路是网络层的核心功能之一，负责确定数据报从源主机到目的主机所经过的路径（Path）。网络层根据选路算法计算最优路径，并维护转发表（Forwarding Table），指导路由器如何转发分组。</p>
<p>一台主机通常与一个路由器直接相连，这个路由器称为第一跳（first-hop）路由器或默认路由器。数据从路由器到路由器之间传一次称为一跳。源主机的第一跳路由器称为源路由器，目的主机的第一跳路由器称为目的路由器。</p>
<p>现在选路协议有 RIP、OSPF、BGP 等。</p>
<h3 id="45-proxyvpn">4.5 proxy，vpn<a class="headerlink" href="#45-proxyvpn" title="Permanent link">&para;</a></h3>
<p>我们学了网络层，就能弄明白一些术语了。一是 proxy，即代理。代理是一种中介服务器，位于客户端和目标服务器之间，负责转发请求和响应。目标服务器看到的当然是代理服务器的 IP。有点像 NAT，当然完全不同。</p>
<p>二是 vpn，全称 Virtual Private Network，虚拟专用网络。其在公共网络（如互联网）上创建一条加密的“隧道”，将用户的设备与远程网络（如企业内网）安全连接。用户的所有流量全部加密，通过 vpn 服务器传输，故其本质上也是一种 proxy。公司和学校常用 vpn。</p>
<h2 id="_6">第五章 链路层<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h2>
<h3 id="51">5.1 概述<a class="headerlink" href="#51" title="Permanent link">&para;</a></h3>
<p>先介绍一些术语。</p>
<p>网络层提供了两台主机间的通信服务。而分组是如何通过构成端到端通信路径的每一段链路，就是链路层协议考虑的事情。</p>
<p>链路层的信道很多，如局域网（LAN），无线局域网（WLAN），卫星网，光纤等广播信道，还有点对点通信信道，如两台路由器之间的通信链路（WAN 协议）。所以链路层有许多协议，如以太网、802.11 WLAN、令牌环、PPP、HDLC 等。数据报在两个主机之间传输时，可以经过不同的链路，由不同的链路层协议承载，就好像不同的交通工具一样。我们本章以太网协议为例进行介绍。</p>
<p>见下图：</p>
<p><img alt="" src="https://cdn.jsdelivr.net/gh/peter5723/imagehost/img/net14.jpg" /></p>
<p>从源主机到目的主机，首先在第一段链路上是局域网，由以太网协议承载。从路由器走到 ISP 的路由器又由 WAN 协议承载。进入目的局域网后又有以太网协议承载。</p>
<p>本章中，主机和路由器均称为节点（node）。相邻两个路径的通信信道称为链路（link）。为了将一个从源主机传输到目的主机，数据报必须通过
端到端路径上的每段路径传输。</p>
<p>链路层数据单元称为帧（frame）。</p>
<p>通过特定的链路时，传输节点将数据报封装在链路层帧中，并将帧发送到链路上，然后接收节点接收该帧，提取出数据报。</p>
<p>同样，我们先考虑链路层提供什么服务：</p>
<ul>
<li>成帧（frame）：将网络层的数据报封装成帧。</li>
<li>链路接入（link access）：帧在链路上如何具体传输，由媒体访问控制协议（MAC）控制。MAC 协议最简单的逻辑，链路空闲，发送方就可以发送帧。</li>
<li>可靠交付</li>
<li>流量控制</li>
<li>差错检测与纠正</li>
<li>全双工、半双工</li>
</ul>
<p>后面的服务与运输层类似，只不过对象是链路与链路之间的节点。</p>
<p>链路层是怎么实现的？在路由器上，我们已经看过。在主机上，链路层的主体是在网络适配器（Network adapter）中实现的，网络适配器也称为网卡（NIC，network interface card）。网络适配器的核心是链路层控制器，这个控制器上有许多芯片，用来实现链路层的各种服务（成帧、流量控制、差错检测等）。作为计算机的一个外设，今天的网卡大多都集成在了主板上，通过总线与 CPU 交互。下图是网络适配器与其他主机组件和协议栈功能的关系。</p>
<p><img alt="" src="https://cdn.jsdelivr.net/gh/peter5723/imagehost/img/net13.png" /></p>
<p>发送方，控制器取得由协议栈较高层生成并存储在主机内存中的数据报，将其封装成链路帧，然后遵循链路接入协议将帧传进通信链路中。接收端，控制器接收整个帧，提取出网络数据报。</p>
<h3 id="52">5.2 差错检测与纠错<a class="headerlink" href="#52" title="Permanent link">&para;</a></h3>
<p>奇偶校验</p>
<p>校验和</p>
<p>循环冗余检测（CRC）方法</p>
<h3 id="53">5.3 多路访问协议<a class="headerlink" href="#53" title="Permanent link">&para;</a></h3>
<p>“广播”，broadcast，的意思是，在任何一个节点传输一个帧时，该信道广播该帧，每个其他节点都收到一个拷贝。广播链路可以让许多发送节点都连接到相同、单一、共享的广播信道上。如何协调多个发送和接收节点对一个共享网络信道的访问，就是多路访问问题。这样的链路称为广播链路。LAN 和 WLAN 就是广播链路。</p>
<p>既然是广播，所有的节点都可以传输帧，我们必须确定哪一个节点有传输的“权利”，不然，有两个以上的节点同时传输帧，所有节点同时收到多个帧，这种现象称为碰撞，“collide”，导致所有的帧都无效了。协调这个问题的协议称为多路访问协议。</p>
<p>多路访问协议希望完成这些目标：假设一个广播信道的传输速率是 R bps，只有一个节点发送数据时，这个节点的吞吐量为 R bps；有 M 个节点发送数据时，每个节点平均吞吐量为 R/M bps。只需要在规定的时间内达到即可。</p>
<p>多路访问协议可以分为三种，信道划分协议、随机接入协议、轮流协议。</p>
<p>信道划分协议将信道资源在时间、频率或码字维度上进行划分，分配给不同的节点使用：</p>
<ul>
<li>时分多址接入（TDMA）：将时间划分为帧，每个帧再划分为时隙，不同节点在指定时隙内传输</li>
<li>频分多址接入（FDMA）：将信道的频率范围划分为多个频段，不同节点使用不同频段</li>
<li>码分多址接入（CDMA）：不同节点使用不同的编码，可以在同一时间同一频率上传输</li>
</ul>
<p>随机接入协议中，节点可以随时传输数据，如果发生碰撞则按照特定算法重传：</p>
<ul>
<li>ALOHA 协议：节点可以随时发送数据帧，无需先检查信道状态；如果发生碰撞，发送方在随机时间后重传数据。</li>
<li>载波侦听多路访问协议（CSMA）：ALOHA 协议的基础上，节点在发送数据前先侦听信道，如果信道空闲再发送，如果信道忙则等待。</li>
</ul>
<p>轮流协议中，节点轮流获得信道传输权。</p>
<ul>
<li>轮询协议</li>
<li>令牌传递协议</li>
</ul>
<p>有线以太网和无线网络都使用的是 CSMA 技术。</p>
<h3 id="54">5.4 链路层编址<a class="headerlink" href="#54" title="Permanent link">&para;</a></h3>
<h4 id="mac">MAC 地址<a class="headerlink" href="#mac" title="Permanent link">&para;</a></h4>
<p>节点具有链路层地址。链路层地址称为 LAN 地址、物理地址或者是 MAC 地址。每一个节点具有唯一 MAC 地址。当然，实际上是节点的网络适配器具有唯一 MAC 地址。MAC 地址有 48 位，通常由十六进制表示，格式类似于：<code>00:1A:2B:3C:4D:5E</code>。MAC 地址的前24位是组织唯一标识符（OUI），由IEEE分配给设备制造商；后24位是由制造商分配的唯一序列号。可以认为一个设备的 MAC 地址是固定不变的。</p>
<p>某适配器向目的适配器发送一个帧时，它将目的适配器的 MAC 地址插入帧中，并将其发送到 LAN 上。若 LAN 是广播的，则每个接收的适配器都检查帧中的 MAC 地址，如果与自己匹配，就提取数据报给网络层，如果不匹配则丢弃。如果这个适配器要发送给 LAN 上的所有适配器，则使用 MAC 广播地址发送：<code>FF:FF:FF:FF:FF:FF</code>。</p>
<p>在 IP 地址之后，链路层也设计其 MAC 地址，是网络分层设计的需要。</p>
<h4 id="arp">ARP 协议<a class="headerlink" href="#arp" title="Permanent link">&para;</a></h4>
<p>地址解析协议（Address resolution protocol，ARP），用于将网络层地址与链路层地址之间进行转换。每个节点的 ARP 模块的内存中有一个 ARP 表，包含 IP 地址与 MAC 地址之间的映射关系。现在假设一个节点 A 要发送数据报给节点 B。如果 A 的 ARP 表中有 MAC 地址，就直接发送就可以了。如果没有的话，就要进行 ARP 查询。节点 A 给适配器传递一个 ARP 查询分组，要求适配器用 MAC 广播地址<code>FF:FF:FF:FF:FF:FF</code> 来发送这个分组。每个收到这个查询分组的节点都检查自己的 IP 地址是否与查询分组的目的 IP 地址相匹配。匹配上的节点 B 返回一个包含自己 MAC 地址的标准帧就可以了。节点 A 将新的映射关系添加到 ARP 表中，然后向节点 B 传输数据。</p>
<h3 id="55">5.5 以太网与局域网<a class="headerlink" href="#55" title="Permanent link">&para;</a></h3>
<p>今天的有线局域网（LAN）基本上是被以太网（Ethernet）技术统治了。</p>
<p>我们首先来看一下以太网的帧结构。</p>
<p>考虑一台主机 A 向另一台主机 B 发送 IP 数据报。主机 A 的网络适配器从上层接收到一个 IP 数据报，将其封装成帧，并将帧传递到物理层。主机 B 的适配器从物理层收到这个帧提取出数据报，传输给网络层。</p>
<p>下面是抓包看到的以太网帧。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a>Ethernet II, Src: Intel_25:25:88 (9c:b1:50:25:25:88), Dst: H3CTechnolog_ff:80:10 (00:0f:e2:ff:80:10)
<a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a>    Destination: H3CTechnolog_ff:80:10 (00:0f:e2:ff:80:10)
<a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a>    Source: Intel_25:25:88 (9c:b1:50:25:25:88)
<a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a>    Type: IPv4 (0x0800)
</code></pre></div>
<p>从这个帧头中，我们可以看到采用的是 Ethernet II 帧格式，源 MAC 地址和目的 MAC 地址，类型字段指示上层协议类型是 IPv4。</p>
<p>以太网向网络层提供无连接服务。即适配器 A 向 B 发送帧时，并不与 B 握手建立连接。同时他提供的是不可靠服务。不管这个帧有没有通过 CRC 校验，适配器都不做任何确认或反馈。</p>
<p>以太网是广播的，其采用的多路访问协议是 CSMA/CD 技术。CSMA/CD 原理比较简单，下面是流程：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a>​​1. 监听信道​​
<a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a>    设备准备发送数据时，先检测信道是否有信号传输（载波）。
<a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a>​​        若空闲​​：立即发送数据帧。
<a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a>​​        若忙​​：等待至信道空闲后发送（非坚持CSMA：随机延迟再监听）。
<a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a>​​2. 发送数据并检测冲突​​
<a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a>    发送过程中持续监听信道：
<a id="__codelineno-17-7" name="__codelineno-17-7" href="#__codelineno-17-7"></a>​       ​无冲突​​：完成发送。
<a id="__codelineno-17-8" name="__codelineno-17-8" href="#__codelineno-17-8"></a>​       ​检测到冲突​​（信号电压突变）：立即停止发送，发出​​阻塞信号（Jamming Signal）​​通知其他设备，并等待随机时间后继续发送。
<a id="__codelineno-17-9" name="__codelineno-17-9" href="#__codelineno-17-9"></a>​3. ​冲突处理与重发​​
<a id="__codelineno-17-10" name="__codelineno-17-10" href="#__codelineno-17-10"></a>    采用​​二进制指数退避算法​​，冲突次数越多，随机等待时间越长（避免重复冲突）。公式：退避时间 = 随机数 × 51.2μs × 2ⁿ（n为冲突次数，最大n=10）。
</code></pre></div>
<p>然后我们来看看由以太网构成的局域网是什么结构。</p>
<p>最早的以太网中，各个设备之间是通过同轴电缆按照总线进行连接的。后来有人发明集线器（hub），这样各个主机就可以直接与集线器相连，以太网变成了星型拓扑结构。今天又进行了一次改进，中间的集线器被交换机（switch）代替。如下图所示。</p>
<p><img alt="" src="https://cdn.jsdelivr.net/gh/peter5723/imagehost/img/net16.jpg" /></p>
<p>下面我们介绍交换机。</p>
<p>交换机的两个功能是转发和过滤。转发是收入链路层帧并将他们转发到出链路。交换机对节点是“透明”的，即节点向另一个节点发送帧时，并不知道交换机的存在。过滤（filter）是交换机决定一个帧应该转发到某个接口还是将其丢弃。交换机的过滤和转发功能借助于交换机表（switch table）来完成。</p>
<p>交换机表的一个表项包括：</p>
<ul>
<li>节点的 MAC 地址</li>
<li>到达该节点的交换机接口</li>
<li>这个表项放置在表中的时间</li>
</ul>
<p>假定一个具有目的地址为 <code>DD:DD:DD:DD:DD:DD</code> 的帧到达了交换机的接口 x，交换机用 MAC 地址 <code>DD:DD:DD:DD:DD:DD</code> 在索引表中查询。这时有可能出现下面几种情况：</p>
<ul>
<li>表中没有这个物理地址的表项。此时，交换机向除了接口 x 的所有接口转发这个帧的拷贝，即进行广播。</li>
<li>表中有一个表项的地址是 <code>DD:DD:DD:DD:DD:DD</code>，而对应的接口是 x，那么直接丢弃这个帧，执行过滤功能即可。</li>
<li>表中有一个表项的地址是 <code>DD:DD:DD:DD:DD:DD</code>，而对应的接口是 y（不是 x），那么就将这个帧放到接口 y 前面的输出缓存区，完成转发功能。</li>
</ul>
<p>交换机从某个接口接收到一个入帧，读取这个帧的源地址字段的 MAC 地址，就可以将这个 MAC 地址和这个接口记录到交换机表中。所以交换机是即插即用设备，插上就能用，不需要进行任何配置，两台主机通过交换机相连就好像通过网线直接相连一样。</p>
<h3 id="56">5.6 网线<a class="headerlink" href="#56" title="Permanent link">&para;</a></h3>
<p>网线有光纤，有双绞线，我们极其简单地说一下双绞线。双绞线使用水晶头接口，是我们最常看到的。双绞线内部包含 8 根铜线，绞成 4 对双绞线。这 8 根线有什么作用呢？我们来看现在最常用的接线法：T568B，对应的每根线的颜色及其作用（俯视从左到右）。</p>
<table>
<thead>
<tr>
<th>线序</th>
<th>颜色</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>白橙</td>
<td>TX+</td>
</tr>
<tr>
<td>2</td>
<td>橙</td>
<td>TX-</td>
</tr>
<tr>
<td>3</td>
<td>白绿</td>
<td>RX+</td>
</tr>
<tr>
<td>4</td>
<td>蓝</td>
<td>未使用(预留)</td>
</tr>
<tr>
<td>5</td>
<td>白蓝</td>
<td>未使用(预留)</td>
</tr>
<tr>
<td>6</td>
<td>绿</td>
<td>RX-</td>
</tr>
<tr>
<td>7</td>
<td>白棕</td>
<td>未使用(预留)</td>
</tr>
<tr>
<td>8</td>
<td>棕</td>
<td>未使用(预留)</td>
</tr>
</tbody>
</table>
<p><img alt="" src="https://cdn.jsdelivr.net/gh/peter5723/imagehost/img/net17.jpg" /></p>
<p>TX 是数据发送端，RX 是数据接收端。用两根线是因为数据采用差分信号传输，通过比较两根线的电压差来判断数据，正极大于负极是 1，负极大于正极是 0。</p>
<p>知道这个，就知道为什么以前电脑课做网线为什么要讲网线的两种接法了。网线的两头有所谓的直连接法和交叉接法。早期的网络设备可以分为两种：MDI（如计算机、路由器）和 MDIX（交换机、集线器）。MDI 设备接口的 TX 端正好和 MDIX 的 RX 端相对应，那么两头都使用直连接法就可以直接相连了。</p>
<p>但是要是两个 MDI 设备连接呢？比如我想要两台主机用网线连接呢？这时如果用直连，就是 TX 端传到 TX 端了，数据无法接收，所以一定要对另一头交叉一下导线，将导线的 RX 端扭到原来 TX 端的位置，来进行匹配。</p>
<p>当然，今天的设备的适配性已经足够好，可以自动检测线序并动态调整，故直接全都使用直连的网线就可以了。</p>







  
    
  
  
    
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Last update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date" title="August 24, 2025 23:23:23 CST">2025-08-24</span>
  </span>

    
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Created">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date" title="June 18, 2025 23:00:44 CST">2025-06-18</span>
  </span>

    
    
    
  </aside>





                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/peter5723/peter5723.github.io" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["content.code.copy", "search.suggest", "search.highlight", "search.share"], "search": "../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.56ea9cef.min.js"></script>
      
        <script src="../../javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>